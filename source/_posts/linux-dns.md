---
title: Linux域名解析
category: linux
tags: [linux,dns]
date: 2014-10-01
comments: true
---
## 解析域名3个关键文件：
```
/etc/hosts
/etc/resolv.conf
/etc/nsswitch.conf
```
<!-- more -->
### nsswitch.conf 与系统获取解析的顺序
```
/home/was$ vi /etc/nsswitch.conf
 #找到hosts关键字
 #hosts:     db files nisplus nis dns
 hosts:      files dns  #此为默认配置
```
### resolv.conf 域名解析服务器配置
```
/home/was$ more /etc/resolv.conf
# Generated by NetworkManager
nameserver 114.114.114.114
nameserver 8.8.8.8
```
### hosts本地映射地址

和Windows系统(C:\Windows\System32\drivers\etc\hosts)下的host的文件相类似，就是一个文本文件，里面存放一些IP和域名的对应关系
```
/home/was$more /etc/hosts
127.0.0.1   localhost
#223.252.198.111 api.yixin.im
```

### 测试易信接口域名解析

```sh
/home/was$ dig @114.114.114.114 api.yixin.im
; <<>> DiG 9.8.2rc1-RedHat-9.8.2-0.17.rc1.el6 <<>> @114.114.114.114 api.yixin.im
; (1 server found)
;; global options: +cmd
;; Got answer:
;; ->>HEADER<<- opcode: QUERY, status: NOERROR, id: 18824
;; flags: qr rd ra; QUERY: 1, ANSWER: 1, AUTHORITY: 0, ADDITIONAL: 0

;; QUESTION SECTION:
;api.yixin.im.                  IN      A

;; ANSWER SECTION:
api.yixin.im.           124     IN      A       223.252.199.8

;; Query time: 6 msec
;; SERVER: 114.114.114.114#53(114.114.114.114)
;; WHEN: Tue Aug 30 16:52:07 2016
;; MSG SIZE  rcvd: 46
```